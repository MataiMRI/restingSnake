Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Select jobs to execute...

[Wed Nov 23 07:10:30 2022]
rule fmriprep:
    input: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/sub-control17/ses-b, /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/freesurfer/sub-control17_ses-b
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/sub-control17/ses-b
    jobid: 0
    wildcards: resultsdir=/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test, subject=control17, session=b
    threads: 8
    resources: mem_mb=20000, disk_mb=1000, tmpdir=/dev/shm/jobs/31486350, cpus=8, time_min=240, gpu=0

fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives participant --participant-label control17 --skip-bids-validation --md-only-boilerplate --fs-license-file license.txt --fs-subjects /bids/derivatives/freesurfer  --output-spaces MNI152NLin2009cAsym:res-2 --nthreads 8 --stop-on-first-crash --low-mem --mem_mb 20000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/work
Activating singularity image /scale_wlg_persistent/filesets/project/uoa03264/fmri_workflow/.snakemake/singularity/acc9d3918a4ab8d0f562f9b72a87bc1b.simg
/opt/conda/lib/python3.8/site-packages/bids/config.py:39: FutureWarning: Setting 'extension_initial_dot' will be removed in pybids 0.16.
  warnings.warn("Setting 'extension_initial_dot' will be removed in pybids 0.16.",
You are using fMRIPrep-21.0.0, and a newer version of fMRIPrep is available: 22.0.2.
Please check out our documentation about how and when to upgrade:
https://fmriprep.readthedocs.io/en/latest/faq.html#upgrading
221122-18:10:45,580 nipype.workflow IMPORTANT:
	 Running fMRIPrep version 21.0.0

         License NOTICE ##################################################
         fMRIPrep 21.0.0
         Copyright 2021 The NiPreps Developers.
         
         This product includes software developed by
         the NiPreps Community (https://nipreps.org/).
         
         Portions of this software were developed at the Department of
         Psychology at Stanford University, Stanford, CA, US.
         
         This software redistributes the versioneer Python package, which is
         Public domain source code.
         
         This software is also distributed as a Docker container image.
         The bootstraping file for the image ("Dockerfile") is licensed
         under the MIT License.
         
         This software may be distributed through an add-on package called
         "Docker Wrapper" that is under the BSD 3-clause License.
         #################################################################
221122-18:10:45,643 nipype.workflow IMPORTANT:
	 Building fMRIPrep's workflow:
           * BIDS dataset path: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids.
           * Participant list: ['control17'].
           * Run identifier: 20221122-181033_b860212d-7424-4e7c-8818-8619def6a5b8.
           * Output spaces: MNI152NLin2009cAsym:res-2.
           * Pre-run FreeSurfer's SUBJECTS_DIR: /bids/derivatives/freesurfer.
221122-18:10:48,863 nipype.workflow INFO:
	 No single-band-reference found for sub-control17_ses-b_task-rest_run-001_bold.nii.gz.
221122-18:10:49,303 nipype.workflow INFO:
	 No single-band-reference found for sub-control17_ses-b_task-rest_run-002_bold.nii.gz.
221122-18:10:49,453 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.981s.
221122-18:10:53,464 nipype.workflow INFO:
	 fMRIPrep workflow graph with 581 nodes built successfully.
221122-18:11:05,155 nipype.workflow IMPORTANT:
	 fMRIPrep started!
221122-18:11:06,197 nipype.workflow WARNING:
	 Storing result file without outputs
221122-18:11:06,201 nipype.workflow WARNING:
	 [Node] Error on "fmriprep_wf.fsdir_run_20221122_181033_b860212d_7424_4e7c_8818_8619def6a5b8" (/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/work/fmriprep_wf/fsdir_run_20221122_181033_b860212d_7424_4e7c_8818_8619def6a5b8)
221122-18:11:06,207 nipype.workflow ERROR:
	 Node fsdir_run_20221122_181033_b860212d_7424_4e7c_8818_8619def6a5b8 failed to run on host wbn206.
221122-18:11:06,213 nipype.workflow ERROR:
	 Saving crash info to /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/logs/crash-20221122-181106-jmcg465-fsdir_run_20221122_181033_b860212d_7424_4e7c_8818_8619def6a5b8-b2f0ec28-0316-4959-9a4a-b234ff96c882.txt
Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
FileNotFoundError: [Errno 2] No such file or directory: '/bids/derivatives/freesurfer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
FileNotFoundError: [Errno 2] No such file or directory: '/bids/derivatives'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/plugins/multiproc.py", line 344, in _send_procs_to_workers
    self.procs[jobid].run(updatehash=updatehash)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 516, in run
    result = self._run_interface(execute=True)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 635, in _run_interface
    return self._run_command(execute)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 741, in _run_command
    result = self._interface.run(cwd=outdir)
  File "/opt/conda/lib/python3.8/site-packages/nipype/interfaces/base/core.py", line 428, in run
    runtime = self._run_interface(runtime)
  File "/opt/conda/lib/python3.8/site-packages/niworkflows/interfaces/bids.py", line 862, in _run_interface
    subjects_dir.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1292, in mkdir
    self.parent.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1292, in mkdir
    self.parent.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
OSError: [Errno 30] Read-only file system: '/bids'

221122-18:11:06,234 nipype.workflow CRITICAL:
	 fMRIPrep failed: Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
FileNotFoundError: [Errno 2] No such file or directory: '/bids/derivatives/freesurfer'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
FileNotFoundError: [Errno 2] No such file or directory: '/bids/derivatives'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/plugins/multiproc.py", line 344, in _send_procs_to_workers
    self.procs[jobid].run(updatehash=updatehash)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 516, in run
    result = self._run_interface(execute=True)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 635, in _run_interface
    return self._run_command(execute)
  File "/opt/conda/lib/python3.8/site-packages/nipype/pipeline/engine/nodes.py", line 741, in _run_command
    result = self._interface.run(cwd=outdir)
  File "/opt/conda/lib/python3.8/site-packages/nipype/interfaces/base/core.py", line 428, in run
    runtime = self._run_interface(runtime)
  File "/opt/conda/lib/python3.8/site-packages/niworkflows/interfaces/bids.py", line 862, in _run_interface
    subjects_dir.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1292, in mkdir
    self.parent.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1292, in mkdir
    self.parent.mkdir(parents=True, exist_ok=True)
  File "/opt/conda/lib/python3.8/pathlib.py", line 1288, in mkdir
    self._accessor.mkdir(self, mode)
OSError: [Errno 30] Read-only file system: '/bids'

[Wed Nov 23 07:11:07 2022]
Error in rule fmriprep:
    jobid: 0
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/sub-control17/ses-b
    shell:
        fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives participant --participant-label control17 --skip-bids-validation --md-only-boilerplate --fs-license-file license.txt --fs-subjects /bids/derivatives/freesurfer  --output-spaces MNI152NLin2009cAsym:res-2 --nthreads 8 --stop-on-first-crash --low-mem --mem_mb 20000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/work
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
