Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=35000, mem_mib=33379, disk_mb=1000, disk_mib=954, cpus=8, time_min=900, gpu=0
Select jobs to execute...

[Tue Apr 25 14:09:20 2023]
rule fmriprep:
    input: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/sub-gil1/ses-a
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1
    log: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1.html
    jobid: 0
    reason: Missing output files: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1
    wildcards: resultsdir=/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil, subject=gil1
    threads: 8
    resources: mem_mb=35000, mem_mib=33379, disk_mb=1000, disk_mib=954, tmpdir=/dev/shm/jobs/34849503, cpus=8, time_min=900, gpu=0

fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep participant --participant-label gil1 --skip-bids-validation --md-only-boilerplate --output-spaces MNI152NLin2009cAsym:res-2 --stop-on-first-crash --low-mem --mem-mb 35000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/work --fs-license-file ./license.txt
Activating singularity image /scale_wlg_persistent/filesets/project/uoa03264/fmri_workflow/.snakemake/singularity/f71c5b609d298942737493540b9a9b93.simg
230425-02:09:49,511 nipype.workflow IMPORTANT:
	 Running fMRIPrep version 23.0.1

         License NOTICE ##################################################
         fMRIPrep 23.0.1
         Copyright 2023 The NiPreps Developers.
         
         This product includes software developed by
         the NiPreps Community (https://nipreps.org/).
         
         Portions of this software were developed at the Department of
         Psychology at Stanford University, Stanford, CA, US.
         
         This software is also distributed as a Docker container image.
         The bootstrapping file for the image ("Dockerfile") is licensed
         under the MIT License.
         
         This software may be distributed through an add-on package called
         "Docker Wrapper" that is under the BSD 3-clause License.
         #################################################################
230425-02:09:49,554 nipype.workflow IMPORTANT:
	 Building fMRIPrep's workflow:
           * BIDS dataset path: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids.
           * Participant list: ['gil1'].
           * Run identifier: 20230425-020937_b7affed8-1fd7-4641-a4ad-e2ed77610028.
           * Output spaces: MNI152NLin2009cAsym:res-2.
           * Pre-run FreeSurfer's SUBJECTS_DIR: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sourcedata/freesurfer.
230425-02:09:52,57 nipype.workflow INFO:
	 No single-band-reference found for sub-gil1_ses-a_task-rest_run-001_bold.nii.gz.
230425-02:09:52,203 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.721s.
230425-02:09:55,107 nipype.workflow INFO:
	 fMRIPrep workflow graph with 399 nodes built successfully.
230425-02:10:06,582 nipype.workflow IMPORTANT:
	 fMRIPrep started!
230425-02:10:16,106 nipype.workflow INFO:
	 [Node] Setting-up "fmriprep_23_0_wf.single_subject_gil1_wf.anat_preproc_wf.fs_isrunning" in "/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/work/fmriprep_23_0_wf/single_subject_gil1_wf/anat_preproc_wf/fs_isrunning".
230425-02:10:16,108 nipype.workflow INFO:
	 [Node] Outdated cache found for "fmriprep_23_0_wf.single_subject_gil1_wf.anat_preproc_wf.fs_isrunning".
230425-02:10:16,124 nipype.workflow INFO:
	 [Node] Executing "fs_isrunning" <nipype.interfaces.utility.wrappers.Function>
230425-02:10:16,134 nipype.workflow INFO:
	 [Node] Finished "fs_isrunning", elapsed time 0.002242s.
230425-02:10:16,136 nipype.workflow WARNING:
	 Storing result file without outputs
230425-02:10:16,137 nipype.workflow WARNING:
	 [Node] Error on "fmriprep_23_0_wf.single_subject_gil1_wf.anat_preproc_wf.fs_isrunning" (/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/work/fmriprep_23_0_wf/single_subject_gil1_wf/anat_preproc_wf/fs_isrunning)
230425-02:10:17,80 nipype.workflow ERROR:
	 Node fs_isrunning failed to run on host wmc023.
230425-02:10:17,84 nipype.workflow ERROR:
	 Saving crash info to /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1/log/20230425-020937_b7affed8-1fd7-4641-a4ad-e2ed77610028/crash-20230425-021017-jmcg465-fs_isrunning-9c3050bc-98bb-4887-8acd-c5eb1287d30a.txt
Traceback (most recent call last):
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/plugins/multiproc.py", line 67, in run_node
    result["result"] = node.run(updatehash=updatehash)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 527, in run
    result = self._run_interface(execute=True)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 645, in _run_interface
    return self._run_command(execute)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 771, in _run_command
    raise NodeExecutionError(msg)
nipype.pipeline.engine.nodes.NodeExecutionError: Exception raised while executing Node fs_isrunning.

Traceback:
	Traceback (most recent call last):
	  File "/opt/conda/lib/python3.9/site-packages/nipype/interfaces/base/core.py", line 398, in run
	    runtime = self._run_interface(runtime)
	  File "/opt/conda/lib/python3.9/site-packages/nipype/interfaces/utility/wrappers.py", line 142, in _run_interface
	    out = function_handle(**args)
	  File "<string>", line 36, in fs_isRunning
	RuntimeError: The FreeSurfer's subject folder </nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sourcedata/freesurfer/sub-gil1> contains IsRunning files that may pertain to a current or past execution: (PosixPath('/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sourcedata/freesurfer/sub-gil1/scripts/IsRunning.rh'),).
	FreeSurfer cannot run if these are present, to avoid interfering with a running process. Please, make sure no other process is running ``recon-all`` on this subject and proceed to delete the files listed above.


Traceback (most recent call last):
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/cli/run.py", line 153, in main
    fmriprep_wf.run(**config.nipype.get_plugin())
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/workflows.py", line 638, in run
    runner.run(execgraph, updatehash=updatehash, config=self.config)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/plugins/base.py", line 166, in run
    self._clean_queue(jobid, graph, result=result)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/plugins/base.py", line 244, in _clean_queue
    raise RuntimeError("".join(result["traceback"]))
RuntimeError: Traceback (most recent call last):
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/plugins/multiproc.py", line 67, in run_node
    result["result"] = node.run(updatehash=updatehash)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 527, in run
    result = self._run_interface(execute=True)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 645, in _run_interface
    return self._run_command(execute)
  File "/opt/conda/lib/python3.9/site-packages/nipype/pipeline/engine/nodes.py", line 771, in _run_command
    raise NodeExecutionError(msg)
nipype.pipeline.engine.nodes.NodeExecutionError: Exception raised while executing Node fs_isrunning.

Traceback:
	Traceback (most recent call last):
	  File "/opt/conda/lib/python3.9/site-packages/nipype/interfaces/base/core.py", line 398, in run
	    runtime = self._run_interface(runtime)
	  File "/opt/conda/lib/python3.9/site-packages/nipype/interfaces/utility/wrappers.py", line 142, in _run_interface
	    out = function_handle(**args)
	  File "<string>", line 36, in fs_isRunning
	RuntimeError: The FreeSurfer's subject folder </nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sourcedata/freesurfer/sub-gil1> contains IsRunning files that may pertain to a current or past execution: (PosixPath('/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sourcedata/freesurfer/sub-gil1/scripts/IsRunning.rh'),).
	FreeSurfer cannot run if these are present, to avoid interfering with a running process. Please, make sure no other process is running ``recon-all`` on this subject and proceed to delete the files listed above.



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/cli/run.py", line 167, in main
    process_crashfile(crashfile)
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/utils/telemetry.py", line 86, in process_crashfile
    crash_info = read_crashfile(str(crashfile))
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/utils/misc.py", line 148, in read_crashfile
    return _read_txt(path)
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/utils/misc.py", line 205, in _read_txt
    cur_key, cur_val = tuple(line.split(" = ", 1))
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/bin/fmriprep", line 8, in <module>
    sys.exit(main())
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/cli/run.py", line 218, in main
    failed_reports = generate_reports(
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/reports/core.py", line 96, in generate_reports
    report_errors = [
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/reports/core.py", line 97, in <listcomp>
    run_reports(
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/reports/core.py", line 79, in run_reports
    return Report(
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/reports/core.py", line 311, in __init__
    self._load_config(Path(config or pkgrf("niworkflows", "reports/default.yml")))
  File "/opt/conda/lib/python3.9/site-packages/fmriprep/reports/core.py", line 48, in _load_config
    self.index(settings["sections"])
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/reports/core.py", line 398, in index
    self.errors = [read_crashfile(str(f)) for f in error_dir.glob("crash*.*")]
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/reports/core.py", line 398, in <listcomp>
    self.errors = [read_crashfile(str(f)) for f in error_dir.glob("crash*.*")]
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/utils/misc.py", line 148, in read_crashfile
    return _read_txt(path)
  File "/opt/conda/lib/python3.9/site-packages/niworkflows/utils/misc.py", line 205, in _read_txt
    cur_key, cur_val = tuple(line.split(" = ", 1))
ValueError: not enough values to unpack (expected 2, got 1)
[Tue Apr 25 14:10:18 2023]
Error in rule fmriprep:
    jobid: 0
    input: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/sub-gil1/ses-a
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1
    log: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1.html (check log file(s) for error details)
    shell:
        fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep participant --participant-label gil1 --skip-bids-validation --md-only-boilerplate --output-spaces MNI152NLin2009cAsym:res-2 --stop-on-first-crash --low-mem --mem-mb 35000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/work --fs-license-file ./license.txt
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job fmriprep since they might be corrupted:
/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_gil/bids/derivatives/fmriprep/sub-gil1
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
