Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Select jobs to execute...

[Wed Nov 23 07:07:22 2022]
rule fmriprep:
    input: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/sub-ctrl18/ses-a, /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/freesurfer/sub-ctrl18_ses-a
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/sub-ctrl18/ses-a
    jobid: 0
    wildcards: resultsdir=/nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test, subject=ctrl18, session=a
    threads: 8
    resources: mem_mb=20000, disk_mb=1000, tmpdir=/dev/shm/jobs/31486348, cpus=8, time_min=240, gpu=0

fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives participant --participant-label ctrl18 --skip-bids-validation --md-only-boilerplate --fs-subjects /bids/derivatives/freesurfer  --output-spaces MNI152NLin2009cAsym:res-2 --nthreads 8 --stop-on-first-crash --low-mem --mem_mb 20000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/work
Activating singularity image /scale_wlg_persistent/filesets/project/uoa03264/fmri_workflow/.snakemake/singularity/acc9d3918a4ab8d0f562f9b72a87bc1b.simg
/opt/conda/lib/python3.8/site-packages/bids/config.py:39: FutureWarning: Setting 'extension_initial_dot' will be removed in pybids 0.16.
  warnings.warn("Setting 'extension_initial_dot' will be removed in pybids 0.16.",
Traceback (most recent call last):
  File "/opt/conda/bin/fmriprep", line 5, in <module>
    from fmriprep.cli.run import main
  File "/opt/conda/lib/python3.8/site-packages/fmriprep/cli/run.py", line 25, in <module>
    from .. import config
  File "/opt/conda/lib/python3.8/site-packages/fmriprep/config.py", line 116, in <module>
    from templateflow import __version__ as _tf_ver
  File "/opt/conda/lib/python3.8/site-packages/templateflow/__init__.py", line 19, in <module>
    from . import api
  File "/opt/conda/lib/python3.8/site-packages/templateflow/api.py", line 7, in <module>
    from .conf import TF_LAYOUT, TF_S3_ROOT, TF_USE_DATALAD, requires_layout
  File "/opt/conda/lib/python3.8/site-packages/templateflow/conf/__init__.py", line 58, in <module>
    _update_s3(TF_HOME, local=True, overwrite=True)
  File "/opt/conda/lib/python3.8/site-packages/templateflow/conf/_s3.py", line 20, in update
    retval = _update_skeleton(skel_file, dest, overwrite=overwrite, silent=silent)
  File "/opt/conda/lib/python3.8/site-packages/templateflow/conf/_s3.py", line 55, in _update_skeleton
    zipref.extractall(str(dest))
  File "/opt/conda/lib/python3.8/zipfile.py", line 1647, in extractall
    self._extract_member(zipinfo, path, pwd)
  File "/opt/conda/lib/python3.8/zipfile.py", line 1697, in _extract_member
    os.mkdir(targetpath)
FileExistsError: [Errno 17] File exists: '/scale_wlg_persistent/filesets/project/uoa03264/fmri_workflow/.cache/templateflow/tpl-Fischer344'
[Wed Nov 23 07:07:32 2022]
Error in rule fmriprep:
    jobid: 0
    output: /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives/sub-ctrl18/ses-a
    shell:
        fmriprep /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/bids/derivatives participant --participant-label ctrl18 --skip-bids-validation --md-only-boilerplate --fs-subjects /bids/derivatives/freesurfer  --output-spaces MNI152NLin2009cAsym:res-2 --nthreads 8 --stop-on-first-crash --low-mem --mem_mb 20000 --nprocs 8 -w /nesi/nobackup/uoa03264/fMRIpipeline_data/processed_test/work
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
